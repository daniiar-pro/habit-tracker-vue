import{r as p,w as f}from"./index-CF_Wg9Y0.js";const s=p([]),e=p({});function m(){try{const t=JSON.parse(localStorage.getItem("habitsList")||"[]");s.value=t}catch{s.value=[]}try{const t=JSON.parse(localStorage.getItem("dates")||"{}");e.value=t||{}}catch{e.value={}}f(s,t=>{const l=t.map(a=>({title:a.title,completed:a.completed,date:a.date,stopped:a.stopped||!1}));localStorage.setItem("habitsList",JSON.stringify(l))},{deep:!0}),f(e,t=>{localStorage.setItem("dates",JSON.stringify(t))},{deep:!0})}function d(){localStorage.setItem("dates",JSON.stringify(e.value))}function g(t,l){const a=new Date,o=new Date(l);for(let n=0;n<=365;n++){const r=new Date(a);r.setDate(a.getDate()+n);const i=r.toISOString().slice(0,10);if(r>=o){e.value[i]||(e.value[i]=s.value.map(u=>({title:u.title,completed:!1,stopped:!1,date:i})));const c=e.value[i].find(u=>u.title===t);c&&(c.stopped=!0)}}localStorage.setItem("dates",JSON.stringify(e.value))}function S(t){for(const l in e.value)e.value[l]=e.value[l].filter(a=>a.title!==t);s.value=s.value.filter(l=>l.title!==t),localStorage.setItem("dates",JSON.stringify(e.value)),localStorage.setItem("habitsList",JSON.stringify(s.value))}function y(t){const l=new Date().toISOString().slice(0,10);return t>l?e.value[t]||s.value.map(o=>({title:o.title,completed:!1,date:t})):(!e.value[t]&&s.value.length>0&&(e.value[t]=s.value.map(o=>({title:o.title,completed:!1,date:t})),d()),e.value[t]||[])}function b(t,l){e.value[t]||(e.value[t]=s.value.map(o=>({title:o.title,completed:!1,stopped:o.stopped||!1,date:t})));const a=e.value[t].find(o=>o.title===l);a&&(a.completed=!a.completed),d()}export{s as a,S as b,e as d,y as g,g as h,m as l,d as s,b as t};
